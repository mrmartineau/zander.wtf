---
interface Props {
  query?: string;
  placeholder?: string;
  autofocus?: boolean;
}

const {
  query = '',
  placeholder = 'Search notes...',
  autofocus = false,
} = Astro.props;
---

<form action="/notes/search" method="GET" class="search-form">
  <i class="ph-duotone ph-magnifying-glass search-icon"></i>
  <input
    type="search"
    name="q"
    value={query}
    placeholder={placeholder}
    class="search-input"
    autofocus={autofocus}
    autocomplete="off"
  />
  <button type="submit" class="visually-hidden">Search</button>
</form>

<style>
  .search-form {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    margin-block-end: var(--space-m);

    &:focus-within {
      box-shadow: 0 2px 0 var(--colour-accent);
    }
  }

  .search-input {
    appearance: none;
    border: 0;
    display: block;
    border-radius: 0;
    line-height: 1.4rem;
    padding: var(--space-2xs) var(--space-xs);
    width: 100%;
    background: transparent;
    font-size: var(--step-1);

    &:focus {
      outline: none;
    }

    &::placeholder {
      color: var(--colour-text);
      opacity: 0.5;
    }
  }

  .search-icon {
    opacity: 0.5;
    pointer-events: none;
    font-size: 2rem;
  }
</style>
